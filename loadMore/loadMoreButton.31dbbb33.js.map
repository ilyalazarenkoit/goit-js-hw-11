{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,WAIA,MAEMC,EAAe,IAAIC,gBAAgB,CACrCC,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAAU,KAGdC,eAAeC,EAAUC,EAASC,GAClC,IAEI,aADuBX,EAAAY,QAAMC,IAAI,qEAAiCH,KAAWR,UAAqBS,I,CAErG,MAAMG,GACHC,QAAQC,IAAIF,E,EChBhB,IAAIG,EACJ,SAASC,EAAaC,GAClBF,EAASE,EAAMC,KAAIC,GACZ,iCAAiCA,EAAKC,sEACrBD,EAAKE,qBAAqBF,EAAKG,+GAIjDH,EAAKI,iFAILJ,EAAKK,oFAILL,EAAKM,wFAILN,EAAKO,4DAKPC,KAAK,IACRC,EAAQC,WAAad,C,+BCtB1B,MAAMe,EAAOC,SAASC,cAAc,gBAC9BC,EAAiBF,SAASC,cAAc,qBACxCJ,EAAUG,SAASC,cAAc,YAEvC,IACIE,EADAC,EAAQ,EAGZL,EAAKM,iBAAiB,UAItB9B,eAAyB+B,GACvBH,EAAUG,EAAMC,cAAcC,YAAYC,MACzCH,EAAMI,iBAyBPN,EAAQ,EACRP,EAAQC,UAAY,GAxBnB,MAAMa,QAAiBnC,EAAU2B,EAASC,GAC1CtB,QAAQC,IAAI4B,GACZ,IAAIC,QAAiBD,EAASE,KAAKC,KACnChC,QAAQC,IAAI6B,GACY,IAApBA,EAASG,QACVC,EAAAC,GAASC,OAAOC,QAAQ,4EAE1BlC,EAAa2B,GACbV,EAAekB,UAAUC,OAAO,aAC7BT,EAASG,OAAS,IACnBb,EAAekB,UAAUE,IAAI,aAE5BV,EAASG,OAAS,GACrBC,EAAAC,GAASC,OAAOK,QAAQ,oBAAoBZ,EAASE,KAAKW,qBAE7C,IAAIR,EAAAS,GAAJ,CAAmB,aAAc,CAC9CC,aAAc,MACdC,aAAc,K,IAxBlBzB,EAAeG,iBAAiB,SAsChC9B,iBACE,IAAIqD,GALWC,EAKQzB,IAJdyB,GADX,IAAiBA,EAMf,MAAMC,QAAoCtD,EAAU2B,EAASyB,GAC7D9C,QAAQC,IAAI+C,GACZ,MAAMC,QAAwBD,EAA4BjB,KAAKC,KAC5DiB,EAAgBhB,OAAS,KAC1Bb,EAAekB,UAAUE,IAAI,aAC7BN,EAAAC,GAASC,OAAOc,KAAK,+DAEvBlD,QAAQC,IAAIgD,GACZ9C,EAAa8C,GACb3B,IACe,IAAIY,EAAAS,GAAJ,CAAmB,aAAc,CAC9CC,aAAc,MACdC,aAAc,K","sources":["src/loadMore/fetchData.js","src/loadMore/renderMarkup.js","src/loadMore/loadMore.js"],"sourcesContent":["import axios from \"axios\";\nimport Notiflix from 'notiflix';\nimport { pages } from \"./loadMore\";\n\nconst BASE_URL = \"https://pixabay.com/api/\"\nconst USER_KEY = \"31138413-9963ca1c42c5ab8454e713dbb\"\nconst searchParams = new URLSearchParams({\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: 40,\n  });\n\nasync function fetchData(keyWord, page) {\ntry {\n    const response = await axios.get(`${BASE_URL}?key=${USER_KEY}&q=${keyWord}&${searchParams}&page=${page}`);\n    return response\n}catch(error) {\n    console.log(error)\n}\n}\n\n\nexport {fetchData, BASE_URL , USER_KEY, searchParams}","import { gallery } from \"./loadMore\";\n\nlet markup;\nfunction renderMarkup(array) {\n    markup = array.map(item => {\n    return `<a class=\"gallery__item\" href=${item.largeImageURL} ><div class=\"photo-card\">\n    <img class=\"image\"src=${item.webformatURL} alt=\"${item.tags}\" loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b>\n        ${item.likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b>\n        ${item.views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b>\n        ${item.comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b>\n        ${item.downloads}\n      </p>\n    </div>\n    </div>\n    </a>`\n     }).join('')\n     gallery.innerHTML += markup;\n    }\n    \nexport {renderMarkup}","import { fetchData, page, searchParams } from \"./fetchData\"\nimport { renderMarkup } from \"./renderMarkup\"\nimport Notiflix from \"notiflix\"\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\n\nconst form = document.querySelector(\".search-form\")\nconst buttonLoadMore = document.querySelector(\".button_load-more\")\nconst gallery = document.querySelector(\".gallery\")\n\nlet pages = 1;\nlet request;\n\nform.addEventListener(\"submit\", onSubmit)\nbuttonLoadMore.addEventListener(\"click\", onLoadMore)\n\n\nasync function onSubmit (event) {\n  request = event.currentTarget.searchQuery.value\n   event.preventDefault();\n   resetPage()\n   const response = await fetchData(request, pages)\n   console.log(response);\n   let fetching = await response.data.hits\n   console.log(fetching)\n    if(fetching.length === 0) {\n      Notiflix.Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\"); \n    }\n    renderMarkup(fetching)\n    buttonLoadMore.classList.remove(\"is-hidden\")\n    if(fetching.length < 40) {\n      buttonLoadMore.classList.add(\"is-hidden\")\n    }\n    if(fetching.length > 1) {\n    Notiflix.Notify.success(`Hooray! We found ${response.data.totalHits} images.`);\n  }\n  var lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    })\n}\n\n\nfunction resetPage() {\n  pages = 1\n  gallery.innerHTML = \"\"\n}\n\nfunction newPage(pages) {\n  return ++pages\n}\n\nasync function onLoadMore () {\n  let newPages = newPage(pages)\n  const preparingForAdditionalFetch = await fetchData(request, newPages)\n  console.log(preparingForAdditionalFetch)\n  const additionalFetch = await preparingForAdditionalFetch.data.hits\n  if(additionalFetch.length < 40) {\n    buttonLoadMore.classList.add(\"is-hidden\")\n    Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n  }\n  console.log(additionalFetch)\n  renderMarkup(additionalFetch)\n  pages++ \n  var lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    })\n}\n\n\nexport {gallery}\n\n"],"names":["$2shzp","parcelRequire","$4fade06b1f64af21$export$dc77997033077144","URLSearchParams","image_type","orientation","safesearch","per_page","async","$4fade06b1f64af21$export$8134c072fddab6a5","keyWord","page","default","get","error","console","log","$8e4fb6ec6adef5ea$var$markup","$8e4fb6ec6adef5ea$export$add40575555c273c","array","map","item","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","$a9732c1c1b5ea77d$export$b21c1b4271bdbe93","innerHTML","$a9732c1c1b5ea77d$var$form","document","querySelector","$a9732c1c1b5ea77d$var$buttonLoadMore","$a9732c1c1b5ea77d$var$request","$a9732c1c1b5ea77d$var$pages","addEventListener","event","currentTarget","searchQuery","value","preventDefault","response","fetching","data","hits","length","$parcel$interopDefault","$eWCmQ","Notify","failure","classList","remove","add","success","totalHits","$fZKcF","captionsData","captionDelay","newPages","pages1","preparingForAdditionalFetch","additionalFetch","info"],"version":3,"file":"loadMoreButton.31dbbb33.js.map"}